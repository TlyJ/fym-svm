(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{492:function(t,e,a){var n=a(517);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(14).default)("cc14f422",n,!0,{sourceMap:!1})},493:function(t,e,a){var n=a(519);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(14).default)("d1ec898c",n,!0,{sourceMap:!1})},516:function(t,e,a){"use strict";var n=a(492);a.n(n).a},517:function(t,e,a){(e=a(13)(!1)).push([t.i,".menu-item[data-v-4aef07b0]{align-items:center;box-sizing:border-box;cursor:pointer;color:#172b4d;text-decoration:none;padding:8px 12px 7px;height:40px;display:flex;border-radius:3px}.menu-item[data-v-4aef07b0],.menu-item-label[data-v-4aef07b0]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.menu-item-label[data-v-4aef07b0]{width:100%}.menu-item-icon-before[data-v-4aef07b0]{display:flex;flex-shrink:0;margin-right:12px}.menu-item[data-v-4aef07b0]:hover,.menu-item[active][data-v-4aef07b0]{background-color:rgba(0,25,75,.043);color:#172b4d;fill:#f4f5f7;text-decoration:none}.menu-item[active][data-v-4aef07b0]{color:#0052cc}",""]),t.exports=e},518:function(t,e,a){"use strict";var n=a(493);a.n(n).a},519:function(t,e,a){(e=a(13)(!1)).push([t.i,".menu-section[data-v-203cfba3]{padding:6px 0}.menu-section-label[data-v-203cfba3]{text-transform:uppercase;font-size:11px;line-height:1.45455;font-weight:700;color:#6b778c;margin-top:14px;margin-bottom:6px;padding:0 12px}",""]),t.exports=e},526:function(t,e,a){"use strict";a.r(e);var n={name:"AccountSide",props:{active:{type:String,default:""}},data:function(){return{menu1:[{to:"/account",label:"资料",key:"profile"},{to:"/account/emails",label:"邮箱",key:"emails"},{to:"/account/security",label:"安全",key:"security"},{to:"/account/connections",label:"关联",key:"connections"}],menu2:[{to:"/account/tokens",label:"令牌",key:"tokens"}]}}},i=a(3),s=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"-mx-4"},[a("Menu",[a("MenuSection",{attrs:{label:"账户"}},t._l(t.menu1,(function(e,n){return a("MenuItem",{key:n,attrs:{active:t.active===e.key},on:{click:function(a){return t.$router.push(e.to)}}},[t._v(t._s(e.label))])})),1),t._v(" "),a("MenuSection",{attrs:{label:"开发者"}},t._l(t.menu2,(function(e,n){return a("MenuItem",{key:n,attrs:{active:t.active===e.key},on:{click:function(a){return t.$router.push(e.to)}}},[t._v(t._s(e.label))])})),1)],1)],1)])}),[],!1,null,null,null);e.default=s.exports;installComponents(s,{MenuItem:a(527).default,MenuSection:a(528).default,Menu:a(529).default})},527:function(t,e,a){"use strict";a.r(e);var n={props:{active:{type:Boolean,default:!1}}},i=(a(516),a(3)),s=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._g({staticClass:"menu-item transition duration-150 ease-in-out",attrs:{active:t.active}},t.$listeners),[t.$slots["icon-before"]?a("span",{staticClass:"menu-item-icon-before"},[t._t("icon-before")],2):t._e(),t._v(" "),a("span",{staticClass:"menu-item-label"},[t._t("default")],2)])}),[],!1,null,"4aef07b0",null);e.default=s.exports},528:function(t,e,a){"use strict";a.r(e);var n={props:{label:{type:String,default:void 0},separator:{type:Boolean,default:!1}}},i=(a(518),a(3)),s=Object(i.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"menu-section"},[this.label?e("div",{staticClass:"menu-section-label"},[this._v(this._s(this.label))]):this._e(),this._v(" "),this._t("default")],2)}),[],!1,null,"203cfba3",null);e.default=s.exports},529:function(t,e,a){"use strict";a.r(e);var n=a(3),i=Object(n.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"menu flex flex-col px-4 py-3 select-none"},[this._t("default")],2)}),[],!1,null,null,null);e.default=i.exports},820:function(t,e,a){"use strict";a.r(e);a(23),a(32),a(25),a(34),a(46),a(47),a(40),a(26),a(59);var n=a(16),i=a(48);function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}var r={layout:"dashboard",data:function(){return{isLoading:!0,isSubmitting:!1,name:"",avatarUrl:"",original:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(i.b)("socket",["isJoined"])),watch:{"$auth.loggedIn":function(t,e){t&&this.init()}},head:function(){return{title:"你的资料 · Hamibot"}},beforeMount:function(){var t=this;this.$socket.on("setting:edit:success",(function(){t.isSubmitting=!1;var e=t.name,a=t.avatarUrl,n=Object.assign({},t.$auth.user,{name:e,avatarUrl:a});t.$auth.setUser(n),t.original=JSON.stringify({name:e,avatarUrl:a}),t.$toast.success("更新成功")})),this.$socket.on("setting:edit:fail",(function(e){var a=e.message;setTimeout((function(){return t.isSubmitting=!1}),3e3),t.$toast.error(a||"未知错误")}))},mounted:function(){this.$auth&&this.$auth.loggedIn&&this.init()},beforeDestroy:function(){this.$socket.off("setting:edit:success"),this.$socket.off("setting:edit:fail")},methods:{init:function(){var t=this,e=this.$auth.user,a=e.name,n=e.avatarUrl,i=JSON.stringify({name:a,avatarUrl:n});Object.assign(this,{name:a,avatarUrl:n,original:i}),this.$nextTick((function(){return t.isLoading=!1}))},update:function(){var t=this.original,e=this.name,a=this.avatarUrl;t!==JSON.stringify({name:e,avatarUrl:a})?(this.isSubmitting=!0,this.$socket.emit("b:setting:edit",{type:"profile",name:e,avatarUrl:a})):this.$toast.show("没有变动")}}},o=a(3),l=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"h-full mb-12"},[a("main",{staticClass:"container mx-auto flex flex-col sm:flex-row mt-6 pb-24 px-4 sm:px-0"},[a("div",{staticClass:"w-full sm:w-3/12"},[a("AccountSide",{attrs:{active:"profile"}})],1),t._v(" "),t.isLoading?a("div",{staticClass:"w-full sm:w-9/12 ml-0 sm:ml-12 mt-6 flex items-center justify-center"},[a("Spinner")],1):a("div",{staticClass:"w-full sm:w-9/12 ml-0 sm:ml-12 mt-6 flex flex-col"},[a("h2",{staticClass:"text-2xl border-b pb-3 mb-4"},[t._v("公开资料")]),t._v(" "),a("span",{staticClass:"text-sm text-text-02 font-semibold"},[t._v("头像")]),t._v(" "),a("div",{staticClass:"mb-2"},[a("Avatar",{attrs:{avatar:t.avatarUrl,size:"xlarge"}})],1),t._v(" "),a("FormulateForm",{staticClass:"flex flex-col",attrs:{name:"form"},on:{submit:t.update}},[a("FormulateInput",{attrs:{type:"text",name:"name",validation:"bail|required|min:2,length|max:36,length",label:"昵称","validation-name":"昵称","error-behavior":"submit"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("div",{staticClass:"mt-12 flex justify-end"},[a("Button",{attrs:{appearance:"primary","is-loading":t.isSubmitting,"is-disabled":!t.isJoined},on:{click:function(e){return t.$formulate.submit("form")}}},[a("span",{staticClass:"px-8"},[t._v("更新")])])],1)],1)])])}),[],!1,null,null,null);e.default=l.exports;installComponents(l,{AccountSide:a(526).default,Spinner:a(105).default,Avatar:a(267).default,Button:a(33).default})}}]);