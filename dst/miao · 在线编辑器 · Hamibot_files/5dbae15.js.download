(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{482:function(t,e,a){var r=a(490);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(14).default)("d7f41806",r,!0,{sourceMap:!1})},486:function(t,e,a){"use strict";a.r(e);a(103);var r={name:"Tag",props:{label:{type:[String,Number],default:""},color:{type:String,default:""},tag:{type:String,default:"span"},link:{type:String,default:void 0}}},i=(a(489),a(3)),o=Object(i.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tag select-none",attrs:{color:this.color}},[e(this.tag,{tag:"component",staticClass:"text",attrs:{href:this.link}},[this._v(this._s(this.label))])],1)}),[],!1,null,"3eb34f2a",null);e.default=o.exports},489:function(t,e,a){"use strict";var r=a(482);a.n(r).a},490:function(t,e,a){(e=a(13)(!1)).push([t.i,".tag[data-v-3eb34f2a]{display:inline-flex;border-radius:3px;height:20px;margin:4px}.text[data-v-3eb34f2a]{display:inline-block;outline:none;padding:2px 0;line-height:1;font-size:14px;margin:0 4px;max-width:180px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}[color=standard][data-v-3eb34f2a]{--bg-opacity:1;background-color:#f4f5f7;background-color:rgba(244,245,247,var(--bg-opacity));--text-opacity:1;color:#42526e;color:rgba(66,82,110,var(--text-opacity))}[color=green][data-v-3eb34f2a]{background-color:#57d9a3;background-color:rgba(87,217,163,var(--bg-opacity))}[color=blue][data-v-3eb34f2a],[color=green][data-v-3eb34f2a]{--bg-opacity:1;--text-opacity:1;color:#172b4d;color:rgba(23,43,77,var(--text-opacity))}[color=blue][data-v-3eb34f2a]{background-color:#4c9aff;background-color:rgba(76,154,255,var(--bg-opacity))}[color=red][data-v-3eb34f2a]{background-color:#ff8f73;background-color:rgba(255,143,115,var(--bg-opacity))}[color=purple][data-v-3eb34f2a],[color=red][data-v-3eb34f2a]{--bg-opacity:1;--text-opacity:1;color:#172b4d;color:rgba(23,43,77,var(--text-opacity))}[color=purple][data-v-3eb34f2a]{background-color:#998dd9;background-color:rgba(153,141,217,var(--bg-opacity))}[color=grey][data-v-3eb34f2a]{--bg-opacity:1;background-color:#42526e;background-color:rgba(66,82,110,var(--bg-opacity));--text-opacity:1;color:#f4f5f7;color:rgba(244,245,247,var(--text-opacity))}[color=grey-yellow][data-v-3eb34f2a]{--bg-opacity:1;background-color:#091e42;background-color:rgba(9,30,66,var(--bg-opacity));--text-opacity:1;color:#ffe380;color:rgba(255,227,128,var(--text-opacity))}[color=teal][data-v-3eb34f2a]{background-color:#00c7e6;background-color:rgba(0,199,230,var(--bg-opacity))}[color=teal][data-v-3eb34f2a],[color=yellow][data-v-3eb34f2a]{--bg-opacity:1;--text-opacity:1;color:#172b4d;color:rgba(23,43,77,var(--text-opacity))}[color=yellow][data-v-3eb34f2a]{background-color:#ffc400;background-color:rgba(255,196,0,var(--bg-opacity))}[color=green-light][data-v-3eb34f2a]{--bg-opacity:1;background-color:#e3fcef;background-color:rgba(227,252,239,var(--bg-opacity));--text-opacity:1;color:#064;color:rgba(0,102,68,var(--text-opacity))}[color=blue-light][data-v-3eb34f2a]{--bg-opacity:1;background-color:#deebff;background-color:rgba(222,235,255,var(--bg-opacity));--text-opacity:1;color:#0747a6;color:rgba(7,71,166,var(--text-opacity))}[color=red-light][data-v-3eb34f2a]{--bg-opacity:1;background-color:#ffebe6;background-color:rgba(255,235,230,var(--bg-opacity));--text-opacity:1;color:#bf2600;color:rgba(191,38,0,var(--text-opacity))}[color=purple-light][data-v-3eb34f2a]{--bg-opacity:1;background-color:#eae6ff;background-color:rgba(234,230,255,var(--bg-opacity));--text-opacity:1;color:#403294;color:rgba(64,50,148,var(--text-opacity))}[color=grey-light][data-v-3eb34f2a]{background-color:#ebecf0;background-color:rgba(235,236,240,var(--bg-opacity))}[color=grey-light][data-v-3eb34f2a],[color=teal-light][data-v-3eb34f2a]{--bg-opacity:1;--text-opacity:1;color:#42526e;color:rgba(66,82,110,var(--text-opacity))}[color=teal-light][data-v-3eb34f2a]{background-color:#b3f5ff;background-color:rgba(179,245,255,var(--bg-opacity))}[color=yellow-light][data-v-3eb34f2a]{--bg-opacity:1;background-color:#fff0b3;background-color:rgba(255,240,179,var(--bg-opacity));--text-opacity:1;color:#42526e;color:rgba(66,82,110,var(--text-opacity))}",""]),t.exports=e},491:function(t,e,a){"use strict";a.r(e);a(104),a(103),a(27),a(54);var r=function(){return Math.random().toString(36).substring(2)},i={name:"ContentLoader",props:{speed:{type:Number,default:2},preserveAspectRatio:{type:String,default:"none"},baseUrl:{type:String,default:""},primaryColor:{type:String,default:"var(--ui-01)"},secondaryColor:{type:String,default:"var(--ui-03)"},primaryOpacity:{type:Number,default:1},secondaryOpacity:{type:Number,default:1},uniqueKey:{type:String,default:""},animate:{type:Boolean,default:!0},viewBox:{type:String,default:void 0},width:{type:[String,Number],default:"300px"},height:{type:[String,Number],default:"20px"}},computed:{fill:function(){return{fill:"url(".concat(this.baseUrl,"#").concat(this.idGradient,")")}},idClip:function(){return this.uniqueKey?"".concat(this.uniqueKey,"-idClip"):r()},idGradient:function(){return this.uniqueKey?"".concat(this.uniqueKey,"-idGradient"):r()},clipPath:function(){return"url(".concat(this.baseUrl,"#").concat(this.idClip,")")}}},o=a(3),s=Object(o.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{staticStyle:{display:"flex"},attrs:{viewBox:t.viewBox,width:t.width,height:t.height,version:"1.1",preserveAspectRatio:t.preserveAspectRatio}},[a("rect",{style:t.fill,attrs:{color:"yellow","clip-path":t.clipPath,x:"0",y:"0",width:"100%",height:"100%"}}),t._v(" "),a("defs",[a("clipPath",{attrs:{id:t.idClip}},[t.$slots.default?t._e():a("rect",{attrs:{x:"0",y:"0",rx:"3",ry:"3",width:"100%",height:"100%"}}),t._v(" "),t._t("default")],2),t._v(" "),a("linearGradient",{attrs:{id:t.idGradient}},[a("stop",{attrs:{offset:"0%","stop-color":t.primaryColor,"stop-opacity":t.primaryOpacity}},[t.animate?a("animate",{attrs:{attributeName:"offset",values:"-2; 1",dur:t.speed,repeatCount:"indefinite"}}):t._e()]),t._v(" "),a("stop",{attrs:{offset:"50%","stop-color":t.secondaryColor,"stop-opacity":t.secondaryOpacity}},[t.animate?a("animate",{attrs:{attributeName:"offset",values:"-1.5; 1.5",dur:t.speed,repeatCount:"indefinite"}}):t._e()]),t._v(" "),a("stop",{attrs:{offset:"100%","stop-color":t.primaryColor,"stop-opacity":t.primaryOpacity}},[t.animate?a("animate",{attrs:{attributeName:"offset",values:"-1; 2",dur:t.speed,repeatCount:"indefinite"}}):t._e()])],1)],1)])}),[],!1,null,null,null);e.default=s.exports},549:function(t,e,a){"use strict";a.r(e);a(103);var r={props:{total:{type:Number,default:0},curr:{type:Number,default:0},pageSize:{type:Number,default:10}},data:function(){return{lEllipsis:!1,rEllipsis:!1}},computed:{pages:function(){return Math.ceil(this.total/this.pageSize)},mPages:function(){for(var t=[],e=this.curr-1>0?this.curr-1>2?2:this.curr-1:0;e>0;e--)t.push(this.curr-e);t.push(this.curr);for(var a=5-this.curr<2?2:5-this.curr,r=1;r<=a&&!(this.curr+r>this.pages);r++)t.push(this.curr+r);return t},lPages:function(){var t=this.mPages[0],e=[];if(t<5){this.lEllipsis=!1;for(var a=t;a>1;a--)e.push(t-a+1)}else this.lEllipsis=!0,e.push.apply(e,[1,2]);return e},rPages:function(){var t=this.mPages[this.mPages.length-1],e=[];if(t>this.pages-2){this.rEllipsis=!1;for(var a=this.pages-t,r=0;r<a&&!(t+r+1>this.pages);r++)e.push(t+r+1)}else this.rEllipsis=t<this.pages-2,e.push.apply(e,[this.pages-1,this.pages]);return e}},methods:{click:function(t){t<1||t>this.pages||t===this.curr||this.$emit("update:page",t)}}},i=a(3),o=Object(i.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.pages>1&&t.curr<=t.pages?a("nav",{staticClass:"relative z-0 inline-flex shadow-sm bg-ui-02 text-text-02 select-none",attrs:{"aria-label":"Pagination"}},[a("div",{staticClass:"relative inline-flex items-center px-2 md:pr-4 py-2 rounded-l-md text-sm font-medium transition duration-200 ease-in-out",class:{"text-disabled-02 cursor-not-allowed":1===t.curr,"hover:bg-ui-03 cursor-pointer":1!==t.curr},on:{click:function(e){return t.click(t.curr-1)}}},[a("svg",{staticClass:"h-5 w-5 fill-current",attrs:{viewBox:"0 0 20 20","aria-hidden":"true"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"}})]),t._v(" "),a("span",{staticClass:"whitespace-no-wrap"},[t._v("上一页")])]),t._v(" "),a("span",{staticClass:"block lg:hidden px-2"}),t._v(" "),t._l(t.lPages,(function(e){return a("div",{key:"l"+e,staticClass:"relative hidden xl:inline-flex items-center px-4 py-2 text-sm font-medium rounded-md hover:bg-ui-03 cursor-pointer transition duration-200 ease-in-out",class:{"bg-interactive-01 text-white hover:bg-hover-primary":t.curr===e},on:{click:function(a){return t.click(e)}}},[t._v("\n    "+t._s(e)+"\n  ")])})),t._v(" "),t.lEllipsis?a("span",{staticClass:"relative hidden xl:inline-flex items-center px-2 py-2 text-xs text-text-05 cursor-default"},[t._v("\n    •••\n  ")]):t._e(),t._v(" "),t._l(t.mPages,(function(e){return a("div",{key:"m"+e,staticClass:"relative hidden lg:inline-flex items-center px-4 py-2 text-sm font-medium rounded-md hover:bg-ui-03 cursor-pointer transition duration-200 ease-in-out",class:{"bg-interactive-01 text-white hover:bg-hover-primary":t.curr===e},on:{click:function(a){return t.click(e)}}},[t._v("\n    "+t._s(e)+"\n  ")])})),t._v(" "),t.rEllipsis?a("span",{staticClass:"relative hidden xl:inline-flex items-center px-2 py-2 text-xs text-text-05 cursor-default"},[t._v("\n    •••\n  ")]):t._e(),t._v(" "),t._l(t.rPages,(function(e){return a("div",{key:"r"+e,staticClass:"relative hidden xl:inline-flex items-center px-4 py-2 text-sm font-medium rounded-md hover:bg-ui-03 cursor-pointer transition duration-200 ease-in-out",class:{"bg-interactive-01 text-white hover:bg-hover-primary":t.curr===e},on:{click:function(a){return t.click(e)}}},[t._v("\n    "+t._s(e)+"\n  ")])})),t._v(" "),a("div",{staticClass:"relative inline-flex items-center px-2 md:pl-4 py-2 rounded-r-md text-sm font-medium transition duration-200 ease-in-out",class:{"text-disabled-02 cursor-not-allowed":t.curr===t.pages,"hover:bg-ui-03 cursor-pointer":t.curr!==t.pages},on:{click:function(e){return t.click(t.curr+1)}}},[a("span",{staticClass:"whitespace-no-wrap"},[t._v("下一页")]),t._v(" "),a("svg",{staticClass:"h-5 w-5 fill-current",attrs:{viewBox:"0 0 20 20","aria-hidden":"true"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}})])])],2):t._e()}),[],!1,null,null,null);e.default=o.exports},550:function(t,e,a){"use strict";a.r(e);var r=a(491),i=function(){return Math.random()*(1-.7)+.7},o={name:"DashDetailsLoader",components:{ContentLoader:r.default},props:{isLoading:{type:Boolean,default:!1},primaryColor:{type:String,default:"var(--ui-01)"},secondaryColor:{type:String,default:"var(--ui-03)"}},data:function(){return{random:i}}},s=a(3),n=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading?t._l(4,(function(e){return a("ContentLoader",{key:e,attrs:{"view-box":"0 0 840 72",height:"72px",width:"100%",primaryColor:t.primaryColor,secondaryColor:t.secondaryColor}},[a("rect",{attrs:{x:"0",y:"0",rx:"3",ry:"3",width:"178",height:"14"}}),t._v(" "),a("rect",{attrs:{x:"0",y:"22",rx:"3",ry:"3",width:217*t.random(),height:"20"}}),t._v(" "),a("rect",{attrs:{x:"420",y:"0",rx:"3",ry:"3",width:"228",height:"14"}}),t._v(" "),a("rect",{attrs:{x:"420",y:"22",rx:"3",ry:"3",width:157*t.random(),height:"20"}})])})):t._t("default")],2)}),[],!1,null,null,null);e.default=n.exports;installComponents(n,{ContentLoader:a(491).default})},607:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var r=a(533),i=a(481);function o(t,e){Object(i.a)(2,arguments);var a=Object(r.a)(t,e)/36e5;return a>0?Math.floor(a):Math.ceil(a)}},840:function(t,e,a){"use strict";a.r(e);a(23),a(32),a(25),a(46),a(47),a(40),a(26);var r=a(16),i=a(48),o=a(798),s=a(801),n=a(607),l=a(694);function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}var u={layout:"dashboard",data:function(){return{isLoading:!0,isSubmitting:!1,items:[],scroll:!1,total:0,pageSize:0,page:1}},head:function(){return{title:"议题 · Hamibot"}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(r.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(i.b)("socket",["isJoined"])),watch:{isJoined:function(t,e){t&&this.init()},page:function(t,e){this.fetchItems(),e&&(this.scroll=!0)}},beforeMount:function(){var t=this;this.$socket.on("issue:list:success",(function(e){Object.assign(t,e),t.$nextTick((function(){t.isLoading=!1,t.scroll&&t.$refs.list.scrollIntoView({behavior:"smooth"})}))})),this.$socket.on("issue:list:fail",(function(e){var a=e.message;t.$toast.error(a||"未知错误",{duration:15e3})}))},mounted:function(){this.isJoined&&this.init()},beforeDestroy:function(){this.$socket.off("issue:list:success"),this.$socket.off("issue:list:fail")},methods:{format:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm";return Object(o.a)(new Date(t),e)},distance:function(t){return Object(s.a)(new Date(t),{locale:l.a,includeSeconds:!0})},difference:function(t){return Object(n.a)(new Date,new Date(t))},init:function(){this.isLoading&&this.fetchItems()},fetchItems:function(){this.$socket.emit("b:issue:list",{page:this.page})}}},d=a(3),p=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-full mb-12"},[a("header",{staticClass:"mt-12 border-b border-ui-03"},[a("div",{staticClass:"container mx-auto px-4 sm:px-0"},[t._m(0),t._v(" "),a("div",{staticClass:"mb-6 flex justify-between"},[a("nuxt-link",{staticClass:"-mx-3",attrs:{to:"/dashboard/scripts"}},[a("Button",{attrs:{appearance:"link"}},[t._v("← 返回脚本")])],1),t._v(" "),a("div",{staticClass:"flex items-center -mx-1 sm:-mx-2"},[a("nuxt-link",{staticClass:"mx-1 sm:mx-2",attrs:{to:"/dashboard/issues/create"}},[a("Button",{attrs:{appearance:"primary"}},[t._v("创建议题")])],1)],1)],1)])]),t._v(" "),a("main",{staticClass:"container mx-auto flex flex-col sm:flex-row mt-6 pb-12 sm:pb-24 px-4 sm:px-0"},[a("div",{staticClass:"w-full sm:w-8/12"},[a("h2",{ref:"list",staticClass:"text-xl mb-4"},[t._v("议题列表")]),t._v(" "),a("DashDetailsLoader",{attrs:{"is-loading":!t.isJoined||t.isLoading}},[t.items.length?a("div",[t._l(t.items,(function(e,r){return a("div",{key:r,staticClass:"rounded-lg border flex flex-col mb-4"},[a("div",{staticClass:"flex items-center justify-between -mx-2 sm:-mx-4 px-5 mt-4 mb-1"},[a("div",{staticClass:"inline-flex items-center px-2 sm:px-4"},[a("nuxt-link",{staticClass:"ml-2 font-bold md:text-lg outline-none hover:text-interactive-01 transition duration-200 ease-in-out",attrs:{to:"/dashboard/issues/"+e._id}},[t._v("\n                  "+t._s(e.title)+"\n                ")])],1)]),t._v(" "),a("footer",{staticClass:"flex items-center flex-wrap text-text-02 px-5 mb-4"},[e.user?a("div",{staticClass:"ml-1 flex items-center text-sm whitespace-no-wrap"},[a("Avatar",{attrs:{avatar:e.user.avatarUrl,size:"small"}}),t._v(" "),a("span",{staticClass:"mx-1"},[t._v(t._s(e.user.name))])],1):e.anonymous?a("svg",{staticClass:"mx-1 fill-current h-6 min-w-6 text-p300",attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M17.5 11.75a4.75 4.75 0 1 1-4.507 6.253h-1.986A4.752 4.752 0 0 1 1.75 16.5a4.75 4.75 0 0 1 9.474-.5h1.552a4.75 4.75 0 0 1 4.724-4.25zm-11 2a2.75 2.75 0 1 0 0 5.5 2.75 2.75 0 0 0 0-5.5zm11 0a2.75 2.75 0 1 0 0 5.5 2.75 2.75 0 0 0 0-5.5zM15.512 3a2.75 2.75 0 0 1 2.634 1.96l1.006 3.35a35.87 35.87 0 0 1 2.327.467 1 1 0 1 1-.458 1.946c-2.756-.648-5.762-.973-9.021-.973-3.259 0-6.265.325-9.021.973a1 1 0 0 1-.458-1.946 35.87 35.87 0 0 1 2.326-.466L5.854 4.96A2.75 2.75 0 0 1 8.488 3h7.024z"}})]):t._e(),t._v(" "),a("div",{staticClass:"mx-2 text-sm"},[t._v("\n                "+t._s(t.format(e.createdAt))+"\n              ")]),t._v(" "),"closed"===e.status?a("Tag",{attrs:{label:"已关闭",color:"red-light"}}):t._e()],1)])})),t._v(" "),a("div",{staticClass:"mt-8"},[a("Pagination",{attrs:{total:t.total,pageSize:t.pageSize,curr:t.page,page:t.page},on:{"update:page":function(e){t.page=e}}})],1)],2):a("div",{staticClass:"flex flex-col items-center justify-center my-24"},[a("span",{staticClass:"text-xl font-bold mb-4"},[t._v("没有议题")])])])],1),t._v(" "),t._m(1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mb-12"},[e("div",{staticClass:"flex items-center"},[e("h1",{staticClass:"text-3xl mr-2"},[this._v("议题")])]),this._v(" "),e("p",[this._v("使用议题跟踪想法、增强、任务或漏洞")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-full sm:w-4/12 ml-0 sm:ml-12 mt-12 sm:mt-0"},[e("h2",{staticClass:"text-xl mb-4"})])}],!1,null,null,null);e.default=p.exports;installComponents(p,{Button:a(33).default,Header:a(180).default,Avatar:a(267).default,Tag:a(486).default,Footer:a(181).default,Pagination:a(549).default,DashDetailsLoader:a(550).default})}}]);