(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{544:function(t,e,s){"use strict";s.r(e);var a={components:{Popup:s(146).default},props:{boundariesElement:{type:[String,Function],default:"viewport"},placement:{type:String,default:"top"},offset:{type:Array,default:function(){return[0,8]}},closeOnOutsideClick:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},positionFixed:{type:Boolean,default:!1},title:{type:String,default:""},appearance:{type:String,default:"primary"},cancelText:{type:String,default:"取消"},confirmText:{type:String,default:"确认"}},data:function(){return{open:!1}},watch:{open:function(t){t?(document.addEventListener("click",this.onOutsideClick),document.addEventListener("keydown",this.onKeyDown)):(document.removeEventListener("click",this.onOutsideClick),document.removeEventListener("keydown",this.onKeyDown))}},beforeDestroy:function(){document.removeEventListener("click",this.onOutsideClick)},methods:{onTriggerClick:function(){this.open=!this.open},onOutsideClick:function(t){this.$refs["popconfirm-container"].contains(t.target)||this.closeOnOutsideClick&&(this.open=!1)},onKeyDown:function(t){27===t.keyCode&&this.closeOnEsc&&(this.open=!1)},onCancel:function(){this.open=!1,this.$emit("cancel")},onConfirm:function(){this.open=!1,this.$emit("confirm")}}},i=s(3),n=Object(i.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"popconfirm-container"},[t._t("trigger",null,{isOpen:t.open,toggle:t.onTriggerClick}),t._v(" "),s("Popup",{ref:"popconfirm",attrs:{"is-open":t.open,offset:t.offset,"target-element":t.$refs["popconfirm-container"],"boundaries-element":t.boundariesElement,placement:t.placement,"position-fixed":t.positionFixed}},[s("div",{staticClass:"px-4 py-5 max-w-xs"},[s("div",{staticClass:"inline-flex items-center"},[s("svg",{staticClass:"fill-current h-5 min-w-5 text-y300 mr-2",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2zm0 13.5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm0-8.75A2.75 2.75 0 0 0 9.25 9.5a.75.75 0 0 0 1.493.102l.007-.102a1.25 1.25 0 1 1 2.5 0c0 .539-.135.805-.645 1.332l-.135.138c-.878.878-1.22 1.447-1.22 2.53a.75.75 0 0 0 1.5 0c0-.539.135-.805.645-1.332l.135-.138c.878-.878 1.22-1.447 1.22-2.53A2.75 2.75 0 0 0 12 6.75z"}})]),t._v(" "),s("span",[t._v(t._s(t.title))])]),t._v(" "),s("footer",{staticClass:"mt-3 flex flex-row justify-end"},[s("Button",{attrs:{appearance:"subtle",spacing:"compact"},on:{click:t.onCancel}},[t._v(t._s(t.cancelText))]),t._v(" "),s("Button",{attrs:{appearance:t.appearance,spacing:"compact"},on:{click:t.onConfirm}},[t._v(t._s(t.confirmText))])],1)])])],2)}),[],!1,null,null,null);e.default=n.exports;installComponents(n,{Button:s(33).default,Footer:s(181).default,Popup:s(146).default})},563:function(t,e,s){var a=s(633);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,s(14).default)("10bf8603",a,!0,{sourceMap:!1})},632:function(t,e,s){"use strict";var a=s(563);s.n(a).a},633:function(t,e,s){(e=s(13)(!1)).push([t.i,".modal-container[data-v-f16b3e9c]{background-color:#fff;box-shadow:0 0 0 1px rgba(9,30,66,.08),0 2px 1px rgba(9,30,66,.08),0 0 20px -6px rgba(9,30,66,.31);color:#091e42;display:flex;flex-direction:column;max-height:100%;pointer-events:auto;border-radius:3px;outline:0;overflow:hidden}.content[data-v-f16b3e9c]{overflow-y:auto;overflow-x:hidden;flex:1 1 auto}.modal-enter[data-v-f16b3e9c],.modal-leave-active[data-v-f16b3e9c]{opacity:0}.modal-enter .positioner[data-v-f16b3e9c]{opacity:0;transform:translateY(20px)}.modal-leave-active .positioner[data-v-f16b3e9c]{opacity:0;transform:translateY(-20px)}footer[data-v-f16b3e9c],header[data-v-f16b3e9c]{align-items:center;display:flex;z-index:1;box-shadow:none;flex:0 0 auto;transition:box-shadow .2s ease 0s}",""]),t.exports=e},654:function(t,e,s){"use strict";s.r(e);s(103);var a=s(502),i=s(503),n=s(180),o=s(181),l={name:"Modal",components:{Blanket:a.default,PositionerAbsolute:i.default,Header:n.default,Footer:o.default},props:{heading:{type:String,default:""},subheading:{type:String,default:""},appearance:{type:String,default:void 0},autoFocus:{type:Boolean,default:!1},actions:{type:Array,default:function(){return["Continue","Cancel"]}},pending:{type:Boolean,default:!1},shouldAllowSubmit:{type:Boolean,default:!0},width:{type:String,default:"600px"},zIndex:{type:Number,default:999},closeOnEsc:{type:Boolean,default:!0}},data:function(){return{mounted:!1}},beforeMount:function(){document.addEventListener("keyup",this.onEsc)},beforeDestroy:function(){document.removeEventListener("keyup",this.onEsc)},methods:{onEsc:function(t){27===t.keyCode&&this.closeOnEsc&&!this.pending&&this.$emit("cancel")},onCancel:function(){this.$emit("cancel")},onSubmit:function(){this.$emit("submit")}}},r=(s(632),s(3)),c=Object(r.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"modal",appear:""}},[s("Blanket",{staticClass:"dialog",attrs:{"z-index":t.zIndex}},[s("PositionerAbsolute",{attrs:{width:t.width}},[s("form",{staticClass:"modal-container",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t._t("default",[s("header",{staticClass:"px-6 py-5"},[t._t("header",[s("Header",{attrs:{heading:t.heading,subheading:t.subheading,appearance:t.appearance}})])],2),t._v(" "),s("div",{staticClass:"content px-6 py-1"},[t._t("content")],2),t._v(" "),s("footer",{staticClass:"px-6 py-6 flex justify-end"},[s("div",{staticClass:"flex-grow"},[t._t("danger")],2),t._v(" "),t._t("footer",[t._t("progress"),t._v(" "),s("Footer",{attrs:{actions:t.actions,"auto-focus":t.autoFocus,appearance:t.appearance,"should-allow-submit":t.shouldAllowSubmit,pending:t.pending},on:{cancel:t.onCancel}})])],2)])],2)])],1)],1)}),[],!1,null,"f16b3e9c",null);e.default=c.exports;installComponents(c,{Header:s(180).default,Header:s(180).default,Footer:s(181).default,Footer:s(181).default,PositionerAbsolute:s(503).default,Blanket:s(502).default})},851:function(t,e,s){"use strict";s.r(e);s(23),s(32),s(25),s(274),s(34),s(46),s(47),s(40),s(27),s(26),s(62),s(59);var a=s(16),i=s(48);function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){Object(a.a)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var l={layout:"dashboard",data:function(){return{list:[],isLoading:!0,isSubmitting:!1,_id:"",name:"",obfuscate:null,useMessage:null,showEditModal:!1,isEditLoading:!1,showRemoveModal:!1,isRemoveLoading:!1,showCreateModal:!1,isCreateLoading:!1,showConfigModal:!1,original:"",formSchema:[],formValues:{},formValueList:[]}},head:function(){return{title:"脚本控制台 · Hamibot"}},computed:o(o({},Object(i.b)("socket",["isJoined"])),Object(i.b)("robot",["robotCount","onlines"])),watch:{isJoined:function(t,e){t&&this.init()}},beforeMount:function(){var t=this;this.$socket.on("script:list:success",(function(e){var s=e.list;t.list=s,t.$nextTick((function(){return t.isLoading=!1})),t.$store.commit("script/add",s)})),this.$socket.on("script:list:fail",(function(e){var s=e.message;t.$toast.error(s||"未知错误",{duration:15e3})})),this.$socket.on("script:edited",(function(e){t.showEditModal=!1,t.showConfigModal=!1,t.isEditLoading=!1;for(var s=t.list,a=0;a<s.length;a++){var i=s[a];if(i._id===e._id){var n=Object.assign({},i,e);t.list.splice(a,1),t.list.unshift(n);break}}t.$toast.success("更新成功")})),this.$socket.on("script:edit:fail",(function(e){var s=e.message;t.isEditLoading=!1,t.$toast.error(s||"未知错误")})),this.$socket.on("script:deleted",(function(e){var s=e._id,a=e.name;t.showRemoveModal=!1,t.isRemoveLoading=!1;for(var i=t.list,n=0;n<i.length;n++){if(i[n]._id===s){t.list.splice(n,1);break}}t.$toast.success("成功删除「".concat(a,"」"))})),this.$socket.on("script:remove:fail",(function(e){var s=e.message;t.isRemoveLoading=!1,t.$toast.error(s||"未知错误")})),this.$socket.on("listing:create:success",(function(e){var s=e.message;t.showCreateModal=!1,t.isCreateLoading=!1,t.$toast.success(s||"成功创建"),t.$router.push("/dashboard/scripts/listing")})),this.$socket.on("listing:create:fail",(function(e){var s=e.message;t.isCreateLoading=!1,t.$toast.error(s||"未知错误")}))},mounted:function(){this.isJoined&&this.init()},beforeDestroy:function(){this.$socket.off("script:list:success"),this.$socket.off("script:list:fail"),this.$socket.off("script:edited"),this.$socket.off("script:edit:fail"),this.$socket.off("script:deleted"),this.$socket.off("script:remove:fail"),this.$socket.off("listing:create:success"),this.$socket.off("listing:create:fail")},methods:{init:function(){this.isLoading&&this.$socket.emit("b:script:list")},openEditModal:function(t){var e=this,s=this.list[t],a=s._id,i=s.name,n=s.obfuscate,o=s.useMessage;this._id=a,this.name=i,this.obfuscate=n,this.useMessage=o,this.showEditModal=!0,this.$nextTick((function(){e.original=JSON.stringify({name:i,obfuscate:n,useMessage:o})}))},edit:function(){var t=this._id,e=this.name,s=this.obfuscate,a=this.useMessage;if(this.original===JSON.stringify({name:e,obfuscate:s,useMessage:a}))return this.showEditModal=!1,void this.$toast.show("没有改动");this.isEditLoading=!0,this.$socket.emit("b:script:edit",{_id:t,name:e,obfuscate:s,useMessage:a})},openConfigModal:function(t){var e=this,s=this.list[t],a=s._id,i=s.name,n=s.configuration,o=n.schema,l=n.defaultValues,r=n.values,c=n.valueList;this._id=a,this.name=i,this.formSchema=o,this.formValues=Object.assign(l,r),this.formValueList=c,this.showConfigModal=!0,this.$nextTick((function(){e.original=JSON.stringify(e.formValues)}))},updateConfig:function(){var t=this._id,e=(this.list,this.formValues);if(this.original===JSON.stringify(e))return this.showConfigModal=!1,void this.$toast.show("没有改动");this.isEditLoading=!0,this.$socket.emit("b:script:edit",{_id:t,field:"values",values:e})},removeConfig:function(){this.isEditLoading=!0,this.$socket.emit("b:script:edit",{_id:this._id,field:"values",values:{}})},applyValues:function(t){this.formValues=t},openRemoveModal:function(t){var e=this.list[t],s=e._id,a=e.name;this._id=s,this.name=a,this.showRemoveModal=!0},remove:function(){this.isRemoveLoading=!0,this.$socket.emit("b:script:remove",{_id:this._id})},robotBusy:function(){var t=this;this.isSubmitting=!0,setTimeout((function(){t.isSubmitting=!1}),500)},run:function(t,e){this.robotBusy(),this.$socket.emit("b:script:run",{scriptId:t,robots:e})},stop:function(t,e){this.robotBusy(),this.$socket.emit("b:script:stop",{scriptId:t,robots:e})},openCreateModal:function(t){var e=this.list[t],s=e._id,a=e.name;this._id=s,this.name=a,this.showCreateModal=!0},closeCreateModal:function(){this.showCreateModal=!1},create:function(){this.isCreateLoading=!0,this.$socket.emit("b:listing:create",{_id:this._id})}}},r=s(3),c=Object(r.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"h-full mb-12"},[s("header",{staticClass:"mt-12 border-b border-ui-03"},[s("div",{staticClass:"container mx-auto px-4 sm:px-0"},[t._m(0),t._v(" "),s("div",{staticClass:"mb-6 flex justify-between"},[s("nuxt-link",{staticClass:"-mx-3",attrs:{to:"/dashboard/scripts"}},[s("Button",{attrs:{appearance:"link"}},[t._v("← 返回脚本")])],1),t._v(" "),s("div",{staticClass:"flex items-center -mx-1 sm:-mx-2"},[s("nuxt-link",{staticClass:"mx-1 sm:mx-2",attrs:{to:"/dashboard/issues"}},[s("Button",{attrs:{appearance:"default"}},[t._v("议题")])],1),t._v(" "),s("nuxt-link",{staticClass:"mx-1 sm:mx-2",attrs:{to:"/dashboard/scripts/listing"}},[s("Button",{attrs:{appearance:"default"}},[t._v("发布管理")])],1),t._v(" "),s("nuxt-link",{staticClass:"mx-1 sm:mx-2",attrs:{to:"/dashboard/scripts/create"}},[s("Button",{attrs:{appearance:"primary"}},[t._v("创建脚本")])],1)],1)],1)])]),t._v(" "),s("div",{staticClass:"container mx-auto flex justify-center mt-6 pb-24"},[s("TableLoader",{staticClass:"overflow-x-auto w-full",attrs:{"is-loading":!t.isJoined||t.isLoading}},[s("div",{staticClass:"align-middle inline-block min-w-full"},[s("div",{staticClass:"overflow-hidden"},[t.list&&t.list.length?s("table",{staticClass:"min-w-full mb-12 sm:mb-24"},[s("thead",{staticClass:"border-b-2 border-ui-03"},[s("tr",{staticClass:"font-semibold text-text-03 text-left text-sm leading-4"},[s("th",{staticClass:"px-2 py-2"},[t._v("名字")]),t._v(" "),s("th",{staticClass:"px-2 py-2 whitespace-no-wrap"},[t._v("市场链接")]),t._v(" "),s("th",{staticClass:"px-2 py-2 whitespace-no-wrap"},[t._v("更新时间")]),t._v(" "),s("th",{staticClass:"px-2 py-2 w-1"},[t._v("操作")])])]),t._v(" "),s("tbody",t._l(t.list,(function(e,a){return s("tr",{key:a,staticClass:"hover:bg-ui-01 transition duration-150 ease-in-out text-sm leading-5 border-b border-ui-03"},[s("td",{staticClass:"px-2 py-2 whitespace-no-wrap"},[t._v(t._s(e.name))]),t._v(" "),s("td",{staticClass:"px-2 py-2 whitespace-no-wrap"},[s("span",{staticClass:"font-mono"},[t._v(t._s(e.listingSlug))]),t._v(" "),e.listingSlug?s("nuxt-link",{staticClass:"ml-1 text-interactive-01 hover:underline focus:outline-none",attrs:{to:"/marketplace/"+e.listingSlug}},[t._v("\n                    查看\n                  ")]):t._e()],1),t._v(" "),s("td",{staticClass:"px-2 py-2 whitespace-no-wrap"},[t._v("\n                  "+t._s(new Date(e.updatedAt).toLocaleString("zu",{timeZone:"Asia/Singapore",hour12:!1}))+"\n                ")]),t._v(" "),s("td",{staticClass:"px-2 py-2 text-right"},[s("div",{staticClass:"flex"},[1===t.robotCount?s("div",[s("Button",{attrs:{"is-loading":!t.isJoined||t.isSubmitting,"is-disabled":0===t.onlines.length},on:{click:function(s){return t.run(e._id,t.onlines[0].robots)}}},[s("div",{staticClass:"flex flex-row items-center"},[s("svg",{staticClass:"fill-current h-5 min-w-5",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 1.5a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17zM9.053 8.585a.5.5 0 0 1 .587-.256l.084.033 6.382 3.19a.5.5 0 0 1 .076.848l-.076.047-6.382 3.191a.5.5 0 0 1-.716-.357L9 15.19V8.809a.5.5 0 0 1 .053-.224z"}})]),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("运行")])])])],1):s("Dropdown",{staticClass:"text-left",attrs:{label:"运行"},scopedSlots:t._u([{key:"trigger",fn:function(e){var a=e.toggle,i=e.isOpen;return s("div",{},[s("Button",{attrs:{appearance:"default","is-loading":!t.isJoined||t.isSubmitting,"is-disabled":0===t.onlines.length,"is-selected":i},on:{click:a}},[s("div",{staticClass:"flex flex-row items-center"},[s("svg",{staticClass:"fill-current h-5 min-w-5",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 1.5a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17zM9.053 8.585a.5.5 0 0 1 .587-.256l.084.033 6.382 3.19a.5.5 0 0 1 .076.848l-.076.047-6.382 3.191a.5.5 0 0 1-.716-.357L9 15.19V8.809a.5.5 0 0 1 .053-.224z"}})]),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("运行")])])])],1)}}],null,!0)},[t._v(" "),t._l(t.onlines,(function(a,i){return s("DropdownItem",{key:i,on:{click:function(s){return t.run(e._id,a.robots)}}},[s("div",{staticClass:"inline-flex items-center"},[a.isTag?s("svg",{staticClass:"fill-current h-5 min-w-5 opacity-50 mr-2",attrs:{viewBox:"0 0 20 20"}},[s("path",{attrs:{d:"M11.13 2l4.89.032A2 2 0 0 1 18 3.881l.006.148.008 4.95a2 2 0 0 1-.467 1.287l-.119.13-6.63 6.631a2 2 0 0 1-2.702.117l-.127-.117L3.02 12.08a2 2 0 0 1-.115-2.703l.117-.127 6.682-6.665a2 2 0 0 1 1.248-.577L11.13 2zm-.007 1a1 1 0 0 0-.613.205l-.1.087-6.682 6.665a1 1 0 0 0-.084 1.32l.083.095 4.949 4.948a1 1 0 0 0 1.32.083l.094-.083 6.63-6.63a1 1 0 0 0 .285-.578l.009-.131-.008-4.95a1 1 0 0 0-.877-.992l-.116-.007L11.123 3zM14 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}})]):t._e(),t._v(" "),s("span",[t._v(t._s(a.name))]),t._v(" "),a.isTag&&a.count>1?s("span",{staticClass:"ml-1"},[s("Tag",{attrs:{label:a.count,color:"blue-light"}})],1):t._e()])])}))],2),t._v(" "),1===t.robotCount?s("div",[s("Button",{attrs:{"is-loading":!t.isJoined||t.isSubmitting,"is-disabled":0===t.onlines.length},on:{click:function(s){return t.stop(e._id,t.onlines[0].robots)}}},[s("div",{staticClass:"flex flex-row items-center"},[s("svg",{staticClass:"fill-current h-4 min-w-4",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M4.75 3A1.75 1.75 0 0 0 3 4.75v14.5c0 .966.784 1.75 1.75 1.75h14.5A1.75 1.75 0 0 0 21 19.25V4.75A1.75 1.75 0 0 0 19.25 3H4.75z"}})]),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("停止")])])])],1):s("Dropdown",{staticClass:"text-left",attrs:{label:"停止"},scopedSlots:t._u([{key:"trigger",fn:function(e){var a=e.toggle,i=e.isOpen;return s("div",{},[s("Button",{attrs:{"is-loading":!t.isJoined||t.isSubmitting,"is-disabled":0===t.onlines.length,"is-selected":i},on:{click:a}},[s("div",{staticClass:"flex flex-row items-center"},[s("svg",{staticClass:"fill-current h-4 min-w-4",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M4.75 3A1.75 1.75 0 0 0 3 4.75v14.5c0 .966.784 1.75 1.75 1.75h14.5A1.75 1.75 0 0 0 21 19.25V4.75A1.75 1.75 0 0 0 19.25 3H4.75z"}})]),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("停止")])])])],1)}}],null,!0)},[t._v(" "),t._l(t.onlines,(function(a,i){return s("DropdownItem",{key:i,on:{click:function(s){return t.stop(e._id,a.robots)}}},[s("div",{staticClass:"inline-flex items-center"},[a.isTag?s("svg",{staticClass:"fill-current h-5 min-w-5 opacity-50 mr-2",attrs:{viewBox:"0 0 20 20"}},[s("path",{attrs:{d:"M11.13 2l4.89.032A2 2 0 0 1 18 3.881l.006.148.008 4.95a2 2 0 0 1-.467 1.287l-.119.13-6.63 6.631a2 2 0 0 1-2.702.117l-.127-.117L3.02 12.08a2 2 0 0 1-.115-2.703l.117-.127 6.682-6.665a2 2 0 0 1 1.248-.577L11.13 2zm-.007 1a1 1 0 0 0-.613.205l-.1.087-6.682 6.665a1 1 0 0 0-.084 1.32l.083.095 4.949 4.948a1 1 0 0 0 1.32.083l.094-.083 6.63-6.63a1 1 0 0 0 .285-.578l.009-.131-.008-4.95a1 1 0 0 0-.877-.992l-.116-.007L11.123 3zM14 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}})]):t._e(),t._v(" "),s("span",[t._v(t._s(a.name))]),t._v(" "),a.isTag&&a.count>1?s("span",{staticClass:"ml-1"},[s("Tag",{attrs:{label:a.count,color:"blue-light"}})],1):t._e()])])}))],2),t._v(" "),s("nuxt-link",{attrs:{to:"/dashboard/scripts/edit/"+e._id}},[s("Button",[s("div",{staticClass:"flex flex-row items-center"},[s("svg",{staticClass:"fill-current h-5 min-w-5",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M8.066 18.943l6.5-14.5a.75.75 0 0 1 1.404.518l-.036.096-6.5 14.5a.75.75 0 0 1-1.404-.518l.036-.096 6.5-14.5-6.5 14.5zM2.22 11.47l4.25-4.25a.75.75 0 0 1 1.133.976l-.073.084L3.81 12l3.72 3.72a.75.75 0 0 1-.976 1.133l-.084-.073-4.25-4.25a.75.75 0 0 1-.073-.976l.073-.084 4.25-4.25-4.25 4.25zm14.25-4.25a.75.75 0 0 1 .976-.073l.084.073 4.25 4.25a.75.75 0 0 1 .073.976l-.073.084-4.25 4.25a.75.75 0 0 1-1.133-.976l.073-.084L20.19 12l-3.72-3.72a.75.75 0 0 1 0-1.06z"}})]),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("源码")])])])],1),t._v(" "),s("Button",{attrs:{"is-disabled":0===e.configuration.schema.length},on:{click:function(e){return t.openConfigModal(a)}}},[s("div",{staticClass:"flex flex-row items-center"},[s("svg",{staticClass:"fill-current h-5 min-w-5",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M12.012 2.25c.734.009 1.466.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.793 9.793 0 0 1 2.204 3.792.75.75 0 0 1-.271.826l-1.242.915a1.38 1.38 0 0 0 .001 2.226l1.243.915a.75.75 0 0 1 .271.826 9.798 9.798 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.616a1.38 1.38 0 0 0-1.926 1.113l-.169 1.526a.75.75 0 0 1-.572.648 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.648l-.168-1.524a1.382 1.382 0 0 0-1.925-1.11l-1.407.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.203-3.796.75.75 0 0 1 .271-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.649c.717-.16 1.45-.244 2.201-.253zm0 1.5a9.136 9.136 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.88 2.88 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.88 2.88 0 0 1 4.018-2.322l.905.396a8.298 8.298 0 0 0 1.347-2.318l-.798-.588a2.88 2.88 0 0 1 0-4.642l.796-.588a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.99 8.99 0 0 0-1.333-.117zM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5z"}})]),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("配置")])])]),t._v(" "),s("Dropdown",{staticClass:"text-left",attrs:{label:"更多"},scopedSlots:t._u([{key:"trigger",fn:function(t){var e=t.toggle;return s("div",{},[s("Button",{on:{click:e}},[s("div",{staticClass:"flex flex-row items-center"},[s("svg",{staticClass:"fill-current h-5 min-w-5",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M12 7.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5zM12 13.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5zM10.25 18a1.75 1.75 0 1 0 3.5 0 1.75 1.75 0 0 0-3.5 0z"}})])])])],1)}}],null,!0)},[t._v(" "),s("DropdownItem",{on:{click:function(e){return t.openEditModal(a)}}},[t._v("编辑")]),t._v(" "),s("DropdownItem",{on:{click:function(e){return t.openCreateModal(a)}}},[t._v("发布")]),t._v(" "),s("DropdownItem",{on:{click:function(e){return t.openRemoveModal(a)}}},[s("span",{staticClass:"text-support-01"},[t._v("删除")])])],1)],1)])])})),0)]):s("div",{staticClass:"flex flex-col items-center justify-center mt-24"},[s("span",{staticClass:"mt-8 text-text-02"},[t._v("还没有创建任何脚本")]),t._v(" "),s("div",{staticClass:"mt-8"},[s("nuxt-link",{attrs:{to:"/dashboard/scripts/create"}},[s("Button",{attrs:{appearance:"primary",spacing:"large"}},[s("span",{staticClass:"px-4"},[t._v("创建脚本")])])],1)],1)]),t._v(" "),t.list&&t.list.length?s("div",{staticClass:"px-4 flex items-center sm:hidden text-sm text-text-02 py-4 select-none"},[s("svg",{staticClass:"fill-current h-5 min-w-5",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M20 6.242a2.25 2.25 0 0 0-2.25-2.25H6.25A2.25 2.25 0 0 0 4 6.242v4a.75.75 0 0 0 1.5 0v-4a.75.75 0 0 1 .75-.75h11.5a.75.75 0 0 1 .75.75v4a.75.75 0 0 0 1.5 0v-4zM17.219 13.22a.75.75 0 0 1 .976-.073l.084.073 2.37 2.367a.77.77 0 0 1 .351.664.786.786 0 0 1-.276.611l-.075.053-2.37 2.367-.084.073a.75.75 0 0 1-.882.007l-.094-.08-.073-.084a.75.75 0 0 1-.007-.883l.08-.094L18.44 17h-3.784l-.089-.007c-.32-.05-.567-.363-.567-.743s.247-.694.567-.743l.09-.007h3.783l-1.221-1.22-.073-.084a.75.75 0 0 1 .073-.976zM6.781 13.223a.75.75 0 0 1 .073.976l-.073.084-1.221 1.22h3.784c.362 0 .656.336.656.75 0 .38-.247.693-.567.743l-.09.007H5.56l1.221 1.221a.75.75 0 0 1 .073.977l-.073.084a.75.75 0 0 1-.976.073l-.085-.073-2.37-2.367a.77.77 0 0 1-.35-.664.77.77 0 0 1 .35-.664l2.37-2.367a.75.75 0 0 1 1.061 0z"}})]),t._v(" "),s("span",{staticClass:"ml-1"},[t._v("左右滑动查看内容")])]):t._e()])])])],1),t._v(" "),t.showEditModal?s("Modal",{attrs:{heading:"编辑信息"},on:{cancel:function(e){t.showEditModal=!1}}},[s("FormulateForm",{attrs:{slot:"content",name:"form"},on:{submit:t.edit},slot:"content"},[s("FormulateInput",{attrs:{type:"text",name:"name",validation:"bail|required|max:50,length",label:"名字","validation-name":"名字"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),s("FormulateInput",{attrs:{name:"useMessage",type:"checkbox",label:"启用脚本消息",help:"启用后需要在脚本中主动调用，用法参见开发文档"},model:{value:t.useMessage,callback:function(e){t.useMessage=e},expression:"useMessage"}}),t._v(" "),s("a",{staticClass:"focus:outline-none text-interactive-01 hover:underline transition duration-150 ease-in-out",attrs:{href:"https://docs.hamibot.com/reference/hamibot/#postmessagetext-opts",target:"_blank"}},[t._v("\n        开发文档（脚本消息）\n      ")])],1),t._v(" "),s("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{appearance:"primary","is-loading":!t.isJoined||t.isEditLoading},on:{click:function(e){return t.$formulate.submit("form")}}},[t._v("保存")]),t._v(" "),s("Button",{attrs:{appearance:"subtle"},on:{click:function(e){t.showEditModal=!1}}},[t._v("取消")])],1)],1):t._e(),t._v(" "),t.showRemoveModal?s("Modal",{attrs:{heading:"删除脚本","auto-focus":"",appearance:"danger"},on:{cancel:function(e){t.showRemoveModal=!1}}},[s("p",{attrs:{slot:"content"},slot:"content"},[t._v("一旦删除将无法恢复，请确认是否要删除「"+t._s(t.name)+"」？")]),t._v(" "),s("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{appearance:"danger","is-loading":!t.isJoined||t.isRemoveLoading},on:{click:t.remove}},[t._v("删除")]),t._v(" "),s("Button",{attrs:{appearance:"subtle"},on:{click:function(e){t.showRemoveModal=!1}}},[t._v("取消")])],1)]):t._e(),t._v(" "),t.showCreateModal?s("Modal",{attrs:{heading:"发布脚本","auto-focus":""},on:{cancel:function(e){t.showCreateModal=!1}}},[s("p",{attrs:{slot:"content"},slot:"content"},[t._v("\n      发布到脚本市场，Hamibot 会以草稿模式保存「"+t._s(t.name)+"」，直到你提交审核。审核通过后用户可以在脚本市场安装和使用你的脚本。\n    ")]),t._v(" "),s("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{appearance:"primary","is-loading":!t.isJoined||t.isCreateLoading},on:{click:t.create}},[t._v("确认")]),t._v(" "),s("Button",{attrs:{appearance:"subtle"},on:{click:function(e){t.showCreateModal=!1}}},[t._v("取消")])],1)]):t._e(),t._v(" "),t.showConfigModal?s("ConfigModal",{attrs:{heading:"编辑配置",subheading:t.name},on:{cancel:function(e){t.showConfigModal=!1}}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("Dropdown",{staticClass:"mb-4",attrs:{label:"历史配置",isDisabled:0===t.formValueList.length}},t._l(t.formValueList,(function(e,a){return s("DropdownItem",{key:a,on:{click:function(s){return t.applyValues(e.values)}}},[t._v(t._s(e.name||e.updatedAt))])})),1),t._v(" "),s("FormulateForm",{attrs:{name:"configForm",schema:t.formSchema},on:{submit:t.updateConfig},model:{value:t.formValues,callback:function(e){t.formValues=e},expression:"formValues"}})],1),t._v(" "),s("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{appearance:"primary","is-loading":!t.isJoined||t.isEditLoading},on:{click:function(e){return t.$formulate.submit("configForm")}}},[t._v("保存")]),t._v(" "),s("Button",{attrs:{appearance:"subtle"},on:{click:function(e){t.showConfigModal=!1}}},[t._v("取消")])],1),t._v(" "),s("Popconfirm",{attrs:{slot:"danger",title:"请确认是否要删除？",placement:"top-start",appearance:"danger",confirmText:"删除"},on:{confirm:t.removeConfig},slot:"danger",scopedSlots:t._u([{key:"trigger",fn:function(e){var a=e.toggle,i=e.isOpen;return s("div",{},[s("Button",{attrs:{"is-selected":i,appearance:"danger","is-loading":!t.isJoined||t.isEditLoading},on:{click:a}},[t._v("删除")])],1)}}],null,!1,2572057152)})],1):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mb-12"},[e("h1",{staticClass:"text-3xl"},[this._v("脚本控制台")]),this._v(" "),e("p",[this._v("管理脚本")])])}],!1,null,null,null);e.default=c.exports;installComponents(c,{Button:s(33).default,Header:s(180).default,Tag:s(486).default,DropdownItem:s(270).default,Dropdown:s(269).default,Table:s(531).default,TableLoader:s(653).default,Modal:s(507).default,Popconfirm:s(544).default,ConfigModal:s(654).default})}}]);